## 什么是redis分片存储

Redis**的**分片**（Sharding或者Partitioning）技术**是**指将数据分散到多个**Redis**实例中的方法，**分片**之后，每个**redis**拥有一部分原数据集的子集。 ... （1）从**存储**能力的角度，**分片**技术通过使用多台计算机的内存来承担更大量的数据，如果没有**分片**技术，那么**redis**的**存储**能力将受限于单台主机的内存大小。





## redis 集群

redis是一个开源的key value存储系统，受到了广大互联网公司的青睐。redis3.0版本之前只支持单例模式，在3.0版本及以后才支持集群，我这里用的是redis3.0.0版本；

为了实现集群的高可用，即判断节点是否健康（能否正常使用），redis-cluster有这么一个投票容错机制：如果集群中超过半数的节点投票认为某个节点挂了，那么这个节点就挂了（fail）。这是判断节点是否挂了的方法；所以集群最少要配置成3个，奇数个。

那么如何判断集群是否挂了呢? -> 如果集群中任意一个节点挂了，而且该节点没有从节点（备份节点），那么这个集群就挂了。这是判断集群是否挂了的方法；

从节点直接从master节点复制，他没有slot。


当aof和rdb同时存在时，会加载aof文件，假如aof文件的语法有误，启动redis是会报错了，就如spring配置文件的bean错了，tomcat也会启动不了。rdb文件也是。
如果aof或rdb文件语法有误，可以使用上面两条命令来修复。

aof修复命令：redis-check-aof --fix appendonlly.aof

rdb修复命令：redis-check-rdb--fix dump.rdb